大家好，欢迎来到周一git专题。



今天和大家聊聊**gitignore的作用**，其实如果你英文还可以的话，你应该已经基本上猜到它的作用了。ignore在英文当中的意思是忽视、忽略，gitignore自然就是git当中的忽视和忽略，言下之意就是忽略某些文件。所以gitignore的作用就是帮助我们在git add时将我们指定的一些文件自动排除在外，不提交到git当中。



## ignore的作用



看到这里你可能很疑惑，git创造出来就是为了管理代码和文件的，为什么还要禁止一些文件提交呢？



其实也很简单，举个很简单的例子。比如当我们写一些编译型语言的时候，比如C、C++、Java、go。我们在运行之前往往需要编译一下将它们编译成可执行的二进制文件，也称为binary文件。编译之后的binary文件其实是比较大的，要比源码大很多。经常一个几十行的代码编译出来好几百KB甚至1MB这都是很正常的，像是这些二进制文件我们就完全没有必要上传。



因为**不论是谁拿到源代码编译一下就可以获得一样的结果**，完全没有上传可执行文件的必要。相反它还会在git仓库当中占据大量的空间，以后不论项目经过多少次迭代，它都会一直停留在git仓库当中，占据磁盘资源。



像是这样没有必要上传的文件还有很多，比如Java编译出来的class文件，一些中间结果、配置文件等等。我们往往图方便都是会喜欢在使用git add提交文件的时候使用git add .也就是提交全部的命令来提交。但是如果我们目录下有这些我们不希望提交的内容的话，也一样会全部提交上去，所以我们希望可以在一个地方进行设置，这样当我们使用git add .的时候可以避开一些我们不希望提交上的文件。



这个用来设置的地方就是gitignore文件。



## 使用方法



gitignore的使用方法非常简单，我们在git目录下创建一个.gitignore文件，然后在这个文件当中列举出我们不希望提交的文件即可。



凡是列在这个文件当中的名称，当我们在使用git add的时候都会替我们忽略掉。我们也没有必要从头开始编写这个gitignore文件，因为git当中已经替我们写好了很多模板，我们可以直接拿过来参考。



模板的地址：https://github.com/github/gitignore



我们打开之后会看到各种ignore文件，这些都是为各个语言定制的gitignore文件。



![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gipdho55kmj31ck0u0jzq.jpg)



我们随便打开一个看看。比如打开一个golang的：



![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gipdhxb5j8j31620jgacd.jpg)



从注释上我们可以看出来，**主要都是一些编译之后的结果**。



## 设置ignore



gitignore文件的语法简单说起来可以归结为5条，这5条都挺简单的，我们一条一条来说。



### #表示注释



这一条很简单，没什么好说的，#开头的行会被git忽略，因为它表示注释。这个注释方法和Python以及shell脚本是一样的，写过的同学应该都不陌生。



### 忽略整个文件夹



如果我们想要忽略某个路径下文件夹内的所有内容，那么我们可以**写出文件夹的路径再加上斜杠作为结尾**即可。



举个例子，假如说我们希望过滤掉src/build文件夹下的所有内容，我们可以这么写：



```bash
src/build/
```



那么这个路径下的所有内容都会被忽略，这个路径是相对路径。



### !表示取反



前面说了，我们可以写出一个文件夹的路径来忽略掉这个文件夹下的所有文件，那么假如说这个文件夹当中有一个文件是我们希望提交的，那应该怎么办呢？



我们**可以用!命令来取反**，表示我们指定的可以不遵守忽略条件的文件名。



比如说我们想要保留src/build路径下叫做main.go的文件，那么我们可以加上一行：



```bash
!main.go
```



### glob模式匹配



我们都知道正则表达式非常复杂，正则表达式入门这一本书足足有好几百页这么厚。但是实际上我们一般情况往下用不到这么复杂的模式匹配，所以我们在shell命令当中常用的**简化了的模式匹配规则**，它比正则表达式要简单很多。



比如\*可以代表一切的字符串，可以是0个也可以是任意多个字符。[abc]表示匹配方括号当中的任何一个字符，?表示匹配任何一个字符。[0-9]表示匹配0-9当中任意一个数字，两个\*号表示任何中间目录，比如src/**/build，可以匹配到src/test/build，也可以匹配到src/current/build。



比如你想要过滤掉所有的txt格式的文件，你可以这么写:



```bash
*.txt
```



比如你想要过滤掉build路径下的所有json文件，你可以这么写：



```
build/*.json
```



虽然glob的模式匹配远远不如正则表达式那么强大，但是对于常用的文件匹配的场景来说，它已经足够了。灵活用好这几种规则已经足够可以应付几乎所有场景下的文件ignore了。



我们洋洋洒洒写了这么多，但是其中的关键点只有零碎的几个，学习成本并不高，但是学会了之后可以一劳永逸地解决很多问题，因此我个人觉得它的性价比还是很高的，非常值得一学。



最后，衷心祝愿大家每天都有所收获。如果还喜欢今天的内容的话，请来一个**三连**支持吧~（**点赞、在看、转发**）



